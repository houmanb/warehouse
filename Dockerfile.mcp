FROM python:3.11-slim
WORKDIR /app
ENV PYTHONUNBUFFERED=1

# Add debugging environment
ENV PYTHONPATH=/app
ENV MCP_DEBUG=1

COPY requirements-mcp.txt .
RUN pip install --no-cache-dir -r requirements-mcp.txt

COPY mcp_server.py .
COPY warehouse_client.py . 

# Test the imports first
RUN python -c "import mcp_server; import warehouse_client; print('All imports successful')"

# MCP servers speak JSON-RPC over stdio; do not print to stdout during operation
# But we can add debugging during startup
CMD ["python", "-u", "mcp_server.py"]